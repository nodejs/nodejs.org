---
title: Как прочесть файл в Node.js?
date: '2011-08-26T10:08:50.000Z'
tags:
  - filesystem
difficulty: 2
layout: knowledge-post.hbs
---

Чтение содержимого файла ― очень распространенная задача программирования, и, как и для многих других вещей, базовый API Node.js предоставляет методы, позволяющие упростить эту задачу. Существует множество методов файловой системы, все они содержатся в модуле `fs`. Что бы прочитать всё содержимое файла, проще всего использовать `fs.readFile`. Выглядит это следующим образом:

```javascript
fs = require('fs');
fs.readFile(file, [encoding], [callback]);

// file = (string) путь к файлу, который нужно прочитать
```

`encoding` это необязательный параметр, который указывает тип кодировки, для чтения файла. Возможные кодировки: 'ascii', 'utf8' и 'base64'. Если кодировка не указана, по умолчанию используется значение `null`.

`callback` ― это функция, которая вызывается, когда файл был прочитан и содержимое готово ― ей передается два аргумента, `error` и `data`. Если ошибки нет, `error` будет иметь значение `null`, а `data` будет содержать содержимое файла; иначе `err` содержит сообщение об ошибке.

Поэтому, если мы хотим прочитать `/etc/hosts` и вывести его в stdout (точно так же, как `cat` в Unix):

```javascript
fs = require('fs')
fs.readFile('/etc/hosts', 'utf8', function (err,data) {
  if (err) {
    return console.log(err);
  }
  console.log(data);
});
```

Содержимое `/etc/hosts` теперь должно быть видно вам, но при условии, что у вас есть разрешение на чтение файла.

Давайте теперь рассмотрим пример того, что происходит, когда вы пытаетесь прочитать недопустимый файл ― самый простой пример ― несуществующий файл.

```javascript
fs = require('fs');
fs.readFile('/несуществующий/файл', 'utf8', function (err,data) {
  if (err) {
    return console.log(err);
  }
  console.log(data);
});
```

Это вывод:

```
{ stack: [Getter/Setter],
  arguments: undefined,
  type: undefined,
  message: 'ENOENT, No such file or directory \'/несуществующий/файл\'',
  errno: 2,
  code: 'ENOENT',
  path: '/несуществующий/файл' }
```

Это базовый [Error object](/en/knowledge/errors/what-is-the-error-object/) Node.js ― часто может быть полезно вызывать `err.stack` напрямую, поскольку он содержит трассировку стека до места в коде, в котором был создан Error object.
